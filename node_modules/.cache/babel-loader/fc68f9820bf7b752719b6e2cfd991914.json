{"ast":null,"code":"import _slicedToArray from \"/Users/user/project_work/react-hook-form_example/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/user/project_work/react-hook-form_example/src/index.tsx\",\n  _this = this;\nimport React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { FormProvider, useController, useForm, useFormContext } from 'react-hook-form';\nimport { z } from 'zod';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport './styles.css';\nfunction App() {\n  var schema = z.object({\n    firstName: z.string().min(1, {\n      message: 'firstName Required'\n    }).max(2, 'firstName max 2'),\n    lastName: z.string().min(1, {\n      message: 'lastName Required'\n    }).max(5, 'lastName max 5')\n  });\n  var methods = useForm({\n    mode: 'all',\n    // \tValidation is triggered on both blur and change events.\n    resolver: zodResolver(schema)\n  });\n  var onSubmit = function onSubmit(data) {\n    alert(JSON.stringify(data));\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(FormProvider, Object.assign({}, methods, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: methods.handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: 'firstName',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    name: 'lastName',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 11\n    }\n  }))));\n}\nvar Input = function Input(_ref) {\n  var name = _ref.name;\n  // focus中か制御\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isFocus = _useState2[0],\n    setIsFocus = _useState2[1];\n  var _useFormContext = useFormContext(),\n    register = _useFormContext.register,\n    control = _useFormContext.control;\n  var _useController = useController({\n      name: name,\n      control: control\n    }),\n    errors = _useController.formState.errors,\n    isTouched = _useController.fieldState.isTouched;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: name,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, \"First Name\"), errors.firstName && isFocus && /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, \"focus \", errors.firstName?.message), /*#__PURE__*/React.createElement(\"input\", Object.assign({\n    placeholder: \"firstName\"\n  }, register(name, {\n    required: true,\n    onChange: function onChange() {\n      return setIsFocus(true);\n    },\n    onBlur: function onBlur() {\n      return setIsFocus(false);\n    }\n  }), {\n    onFocus: function onFocus() {\n      return setIsFocus(true);\n    } // focus中か制御\n    ,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  })), errors.firstName && isTouched && !isFocus && /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \"not focus\", errors.firstName?.message));\n};\nvar rootElement = document.getElementById('root');\nReactDOM.render( /*#__PURE__*/React.createElement(App, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 17\n  }\n}), rootElement);","map":{"version":3,"names":["React","useState","ReactDOM","FormProvider","useController","useForm","useFormContext","z","zodResolver","App","schema","object","firstName","string","min","message","max","lastName","methods","mode","resolver","onSubmit","data","alert","JSON","stringify","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Object","assign","handleSubmit","Input","name","type","_ref","_useState","_useState2","_slicedToArray","isFocus","setIsFocus","_useFormContext","register","control","_useController","errors","formState","isTouched","fieldState","_this","htmlFor","placeholder","required","onChange","onBlur","onFocus","rootElement","document","getElementById","render"],"sources":["/Users/user/project_work/react-hook-form_example/src/index.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n  FormProvider,\n  useController,\n  useForm,\n  useFormContext,\n} from 'react-hook-form';\nimport { z } from 'zod';\nimport { zodResolver } from '@hookform/resolvers/zod';\n\nimport './styles.css';\n\nfunction App() {\n  const schema = z.object({\n    firstName: z\n      .string()\n      .min(1, { message: 'firstName Required' })\n      .max(2, 'firstName max 2'),\n    lastName: z\n      .string()\n      .min(1, { message: 'lastName Required' })\n      .max(5, 'lastName max 5'),\n  });\n  const methods = useForm({\n    mode: 'all', // \tValidation is triggered on both blur and change events.\n    resolver: zodResolver(schema),\n  });\n  const onSubmit = (data: unknown) => {\n    alert(JSON.stringify(data));\n  };\n\n  return (\n    <div className='App'>\n      <FormProvider {...methods}>\n        <form onSubmit={methods.handleSubmit(onSubmit)}>\n          <Input name={'firstName'} />\n          <Input name={'lastName'} />\n          <input type='submit' />\n        </form>\n      </FormProvider>\n    </div>\n  );\n}\n\nconst Input = ({\n  name,\n}: {\n  name: string;\n}) => {\n  // focus中か制御\n  const [isFocus, setIsFocus] = useState(false);\n  const { register, control } = useFormContext();\n  const {\n    formState: { errors },\n    fieldState: { isTouched }, // 一回でもinputにフォーカスしたか否か\n  } = useController({\n    name,\n    control,\n  });\n\n  return (\n    <div>\n      <label htmlFor={name}>First Name</label>\n      {errors.firstName && isFocus && (\n        <p>focus {errors.firstName?.message as string}</p>\n      )}\n      <input\n        placeholder='firstName'\n        {...register(name, {\n          required: true,\n          onChange: () => setIsFocus(true),\n          onBlur: () => setIsFocus(false),\n        })}\n        onFocus={() => setIsFocus(true)} // focus中か制御\n      />\n      {errors.firstName && isTouched && !isFocus && (\n        <p>not focus{errors.firstName?.message as string}</p>\n      )}\n    </div>\n  );\n};\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(<App />, rootElement);\n\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,QAAQ,MAAM,WAAW;AAChC,SACEC,YAAY,EACZC,aAAa,EACbC,OAAO,EACPC,cAAc,QACT,iBAAiB;AACxB,SAASC,CAAC,QAAQ,KAAK;AACvB,SAASC,WAAW,QAAQ,yBAAyB;AAErD,OAAO,cAAc;AAErB,SAASC,GAAGA,CAAA,EAAG;EACb,IAAMC,MAAM,GAAGH,CAAC,CAACI,MAAM,CAAC;IACtBC,SAAS,EAAEL,CAAC,CACTM,MAAM,CAAC,CAAC,CACRC,GAAG,CAAC,CAAC,EAAE;MAAEC,OAAO,EAAE;IAAqB,CAAC,CAAC,CACzCC,GAAG,CAAC,CAAC,EAAE,iBAAiB,CAAC;IAC5BC,QAAQ,EAAEV,CAAC,CACRM,MAAM,CAAC,CAAC,CACRC,GAAG,CAAC,CAAC,EAAE;MAAEC,OAAO,EAAE;IAAoB,CAAC,CAAC,CACxCC,GAAG,CAAC,CAAC,EAAE,gBAAgB;EAC5B,CAAC,CAAC;EACF,IAAME,OAAO,GAAGb,OAAO,CAAC;IACtBc,IAAI,EAAE,KAAK;IAAE;IACbC,QAAQ,EAAEZ,WAAW,CAACE,MAAM;EAC9B,CAAC,CAAC;EACF,IAAMW,QAAQ,GAAG,SAAXA,QAAQA,CAAIC,IAAa,EAAK;IAClCC,KAAK,CAACC,IAAI,CAACC,SAAS,CAACH,IAAI,CAAC,CAAC;EAC7B,CAAC;EAED,oBACEtB,KAAA,CAAA0B,aAAA;IAAKC,SAAS,EAAC,KAAK;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAClBjC,KAAA,CAAA0B,aAAA,CAACvB,YAAY,EAAA+B,MAAA,CAAAC,MAAA,KAAKjB,OAAO;IAAAU,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,iBACvBjC,KAAA,CAAA0B,aAAA;IAAML,QAAQ,EAAEH,OAAO,CAACkB,YAAY,CAACf,QAAQ,CAAE;IAAAO,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC7CjC,KAAA,CAAA0B,aAAA,CAACW,KAAK;IAACC,IAAI,EAAE,WAAY;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eAC5BjC,KAAA,CAAA0B,aAAA,CAACW,KAAK;IAACC,IAAI,EAAE,UAAW;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eAC3BjC,KAAA,CAAA0B,aAAA;IAAOa,IAAI,EAAC,QAAQ;IAAAX,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAClB,CACM,CACX,CAAC;AAEV;AAEA,IAAMI,KAAK,GAAG,SAARA,KAAKA,CAAAG,IAAA,EAIL;EAAA,IAHJF,IAAI,GAAAE,IAAA,CAAJF,IAAI;EAIJ;EAAA,IAAAG,SAAA,GAC8BxC,QAAQ,CAAC,KAAK,CAAC;IAAAyC,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAtCG,OAAO,GAAAF,UAAA;IAAEG,UAAU,GAAAH,UAAA;EAAA,IAAAI,eAAA,GACIxC,cAAc,CAAC,CAAC;IAAtCyC,QAAQ,GAAAD,eAAA,CAARC,QAAQ;IAAEC,OAAO,GAAAF,eAAA,CAAPE,OAAO;EAAA,IAAAC,cAAA,GAIrB7C,aAAa,CAAC;MAChBkC,IAAI,EAAJA,IAAI;MACJU,OAAO,EAAPA;IACF,CAAC,CAAC;IALaE,MAAM,GAAAD,cAAA,CAAnBE,SAAS,CAAID,MAAM;IACLE,SAAS,GAAAH,cAAA,CAAvBI,UAAU,CAAID,SAAS;EAMzB,oBACEpD,KAAA,CAAA0B,aAAA;IAAAE,MAAA,EAAA0B,KAAA;IAAAzB,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACEjC,KAAA,CAAA0B,aAAA;IAAO6B,OAAO,EAAEjB,IAAK;IAAAV,MAAA,EAAA0B,KAAA;IAAAzB,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,YAAiB,CAAC,EACvCiB,MAAM,CAACtC,SAAS,IAAIgC,OAAO,iBAC1B5C,KAAA,CAAA0B,aAAA;IAAAE,MAAA,EAAA0B,KAAA;IAAAzB,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,QAAM,EAACiB,MAAM,CAACtC,SAAS,EAAEG,OAAqB,CAClD,eACDf,KAAA,CAAA0B,aAAA,UAAAQ,MAAA,CAAAC,MAAA;IACEqB,WAAW,EAAC;EAAW,GACnBT,QAAQ,CAACT,IAAI,EAAE;IACjBmB,QAAQ,EAAE,IAAI;IACdC,QAAQ,EAAE,SAAAA,SAAA;MAAA,OAAMb,UAAU,CAAC,IAAI,CAAC;IAAA;IAChCc,MAAM,EAAE,SAAAA,OAAA;MAAA,OAAMd,UAAU,CAAC,KAAK,CAAC;IAAA;EACjC,CAAC,CAAC;IACFe,OAAO,EAAE,SAAAA,QAAA;MAAA,OAAMf,UAAU,CAAC,IAAI,CAAC;IAAA,CAAC,CAAC;IAAA;IAAAjB,MAAA,EAAA0B,KAAA;IAAAzB,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EAClC,CAAC,EACDiB,MAAM,CAACtC,SAAS,IAAIwC,SAAS,IAAI,CAACR,OAAO,iBACxC5C,KAAA,CAAA0B,aAAA;IAAAE,MAAA,EAAA0B,KAAA;IAAAzB,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,WAAS,EAACiB,MAAM,CAACtC,SAAS,EAAEG,OAAqB,CAEnD,CAAC;AAEV,CAAC;AAED,IAAM8C,WAAW,GAAGC,QAAQ,CAACC,cAAc,CAAC,MAAM,CAAC;AACnD7D,QAAQ,CAAC8D,MAAM,eAAChE,KAAA,CAAA0B,aAAA,CAACjB,GAAG;EAAAmB,MAAA;EAAAC,QAAA;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA;AAAA,CAAE,CAAC,EAAE4B,WAAW,CAAC"},"metadata":{},"sourceType":"module"}